/*
 * max7219.c
 *
 *  Created on: Feb 18, 2024
 *      Author: sw
 */


#include "max7219.h"
#include "spi.h"
extern SPI_HandleTypeDef hspi1;


void max7219_init()
{
	uint16_t init[] = {0x0900,0x0A01,0x0b07,0x0c01,0x0f00};
	uint8_t i;
	for(i=0; i<sizeof(init)/2; i++)
	{
		spi_transmit(init[i]);
	}
}

void max7219_display_clear()
{
	uint16_t data[] = {0x0100,0x0200,0x0300,0x0400,0x0500,0x0600,0x0700,0x0800,0x0000,0x0000,0x0000};
	for(uint8_t i=0; i<sizeof(data)/2; i++)
	{
		spi_transmit(data[i]);
	}
}

void max7219_data()
{
	uint16_t data1[] = {0x0100,0x0200,0x031f,0x0404,0x0504,0x0605,0x0706,0x0804,0x0000,0x0000,0x0000}; //1
	uint16_t data2[] = {0x0100,0x0200,0x030f,0x0401,0x050f,0x0608,0x070f,0x0800,0x0000,0x0000,0x0000}; //2
	uint16_t data3[] = {0x0100,0x0200,0x0307,0x0404,0x0507,0x0604,0x0707,0x0800,0x0000,0x0000,0x0000}; //3
	uint16_t data4[] = {0x0100,0x0200,0x0308,0x0408,0x053f,0x060a,0x070c,0x0808,0x0000,0x0000,0x0000}; //4

	for(int i=0; i<sizeof(data1)/2; i++)
	{
		spi_transmit4(1, data1[i]);
		spi_transmit4(2, data2[i]);
		spi_transmit4(3, data3[i]);
		spi_transmit4(4, data4[i]);
	}

}


